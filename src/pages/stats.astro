---
import Layout from "@/layouts/Layout.astro";
import SeriesFilterDropdown from "@/components/stats/SeriesFilterDropdown.astro";
import StatsTableSection from "@/components/stats/StatsTableSection.astro";
import SeriesFilterDropdownSkeleton from "@/components/stats/skeletons/SeriesFilterDropdownSkeleton.astro";
import StatsTableSectionSkeleton from "@/components/stats/skeletons/StatsTableSectionSkeleton.astro";

// Get seriesId from query params
const selectedSeriesId = Astro.url.searchParams.get("seriesId");
---

<Layout title="Overall Stats - Brawl Master Tracker">
  <div class="space-y-6">
    <!-- Series Filter with server:defer -->
    <SeriesFilterDropdown
      selectedSeriesId={selectedSeriesId}
      server:defer
    >
      <SeriesFilterDropdownSkeleton slot="fallback" />
    </SeriesFilterDropdown>

    <!-- Stats Table with server:defer -->
    <StatsTableSection
      selectedSeriesId={selectedSeriesId}
      server:defer
    >
      <StatsTableSectionSkeleton slot="fallback" />
    </StatsTableSection>
  </div>
</Layout>